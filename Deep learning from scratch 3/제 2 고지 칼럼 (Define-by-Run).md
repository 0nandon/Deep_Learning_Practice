## Define-and-Run과 Define-by-Run

딥러닝 프레임워크는 동작 방식에 따라 크게 두 가지로 나눌 수 있다. 하나는 'Define-by-Run'과 나머지 하나는 'Define-and-Run' 이다.
이 칼럼에서는 두 방식의 장점과 단점에 대해서 알아본다.

### Define-and-Run
Define-and-Run을 직역하면 '계산 그래프를 정의한 다음, 데이터를 흘려보낸다'라는 뜻이다.
계산 그래프 정의는 사용자가 제공하고, 프레임워크는 주어진 그래프를 컴퓨터가 처리할 수 있는 형태로 변환하여,
데이터를 흘려보내는 식이다. 다음 pseudocode를 살펴보자.

```python
# 가상의 Define-and-Run 방식 프레임워크용 코드 예

# 계산 그래프 정의
a = Variable('a')
b = Variable('b')
c = a * b
d = c + Constant(1)

# 계산 그래프 컴파일
f = compile(d)

# 데이터 흘려보내기
d = f(a=np.array(2), b=np.array(3))
```
위 코드 중에서, '계산 그래프 정의'라고 되어있는 주석 아래의 4줄로 계산 그래프를 정의했다.
주의할 점은, 이 네 줄의 코드에 대해서는 실제 계산이 이루어지지 않는다는 점이다.

실제 '수치'가 아닌, '기호(symbol)'를 대상으로 프로그래밍됐기 때문이다.
이런 프로그래밍 방식을 Symbolic programming 이라고 한다.

이와 같이, Define-and-Run 방식 프레임워크에서는 실제 데이터가 아닌 기호를 사용한 추상적인 계산 절차를 코딩해야 한다.
또한 도메인 특화 언어(DSL domain-specific-language)를 사용해야 한다.
> Define-and-Run 방식 프레임워크의 대부분은 도메인 특화 언어를 사용하여 계산을 정의해야 한다. 도메인 특화 언어는
> 한마디로, '파이썬 위에서 동작하는 새로운 프로그래밍 언어'라고 할 수 있다. 이러한 언어들은 미분을 하기 위해 설계된 언어이기도 한데,
> 이러한 이유 때문에, 최근에는 딥러능 프레임워크를 일컬어 미분 가능 프로그래밍(differentiable programming)이라고도 한다.

### Define-and-Run의 장점

* Define-and-Run의 가장 큰 장점은 성능이다. Define-and-Run 방식의 프레임워크는 데이터를 흘려보내기전에, 계산 그래프가
손에 들어오므로, 계산 그래프 전체를 고려하여 최적화를 할 수 있고, 성능 향상을 기대할 수 있다.
* Define-and-Run 방식 프레임워크의 또 다른 장점은 어떻게 컴파일하느냐에 따라 다른 실행 파일로 변환할 수 있다.
따라서, 파이썬이 아닌 다른 환경에서도 데이터를 흘려보내는 게 가능하다. 파이썬에서 벗어났을 때 얻는, 가장 큰 해택은
파이썬 자체가 주는 오버헤드가 사라진다는 점이다. IoT 기기처럼 자원이 부족한 edge 전용 환경에서는 특히 중요한 특징이다.
